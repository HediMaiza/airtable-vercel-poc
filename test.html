<!doctype html>
<html lang="fr">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Réalisations clients - POC</title>
    <link rel="stylesheet" href="test.css?v=1" />
  </head>
  <body>
      <section class="block hero">
        <h1>First Enseigne, FABRICANT D’ENSEIGNES PUBLICITAIRE</h1>
        <p>FIRST ENSEIGNE est une boutique en ligne d'enseignes publicitaires économiques mais de haute qualité. Nous sommes la marque préférée des professionnels car nous nous occupons de la gestion, de la fabrication et de l'expédition de tous nos produits.</p>
    </section>
    <h2>Nos réalisations clients</h2>

    <div id="projects"></div>

    <h2>Contactez-nous</h2>
    <section class="block">
        <p>contact@firstenseigne.fr</p>
    </section>


    <footer class="footer has-background-inherit" role="contentinfo">
        First enseigne - @copyright 2026 - contact@firstenseigne.fr
    </footer>

    <script>
      // ⚠️ REMPLACE par ton URL Vercel réelle
      const API_URL = 'https://airtable-vercel-poc-git-main-hedis-projects-849f29af.vercel.app/api/realisations';

      async function loadProjects() {
        const container = document.getElementById('projects');
        container.innerHTML = '<p>Chargement...</p>';
        try {
          const response = await fetch(API_URL);
          if (!response.ok) {
            throw new Error('Erreur API: ' + response.status);
          }
          const projets = await response.json();
          container.innerHTML = '';

          // Filtre les projets vides (sans titre)
          const projetsRemplis = projets.filter(p => p.titre && p.titre.trim() !== '');

          if (!projetsRemplis.length) {
            container.innerHTML = '<p>Aucune réalisation pour le moment.</p>';
            return;
          }

          projetsRemplis.forEach((p) => {
            const article = document.createElement('article');
            article.className = 'project';

            article.innerHTML = `
              <h2>${p.titre}</h2>
              <p>${p.description}</p>
              ${
                p.imageUrl && p.imageUrl.trim() !== ''
                  ? `<img src="${p.imageUrl}" alt="${p.titre}" loading="lazy" />`
                  : '<div class="no-image">Pas d\'image</div>'
              }
            `;

            container.appendChild(article);
          });
        } catch (err) {
          console.error(err);
          container.innerHTML = '<p style="color: red;">❌ Erreur lors du chargement des réalisations.</p>';
        }
      }
      loadProjects();
    </script>
  </body>
</html>
